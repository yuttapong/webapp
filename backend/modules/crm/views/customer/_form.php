<?phpuse yii\helpers\Html;use kartik\widgets\ActiveForm;use kartik\builder\Form;use yii\bootstrap\Modal;/** * @var yii\web\View $this * @var backend\modules\crm\models\Customer $model * @var yii\widgets\ActiveForm $form */?><div class="customer-form">    <?php $form = ActiveForm::begin([        'type'=>ActiveForm::TYPE_VERTICAL,        'id' => 'customer-form',        'enableAjaxValidation' => true,    ]);    echo Html::tag('legend','<i class="fa fa-user"></i> ข้อมูลทั่วไป');    echo Form::widget([        'model' => $model,        'form' => $form,        'columns' => 4,        'attributes' => [            'gender' => [                'type' => Form::INPUT_DROPDOWN_LIST,                'items' => $model->getGenderItems(),                'options' => ['prompt' => '-เพศ-']            ],            'prefixname' => ['type' => Form::INPUT_DROPDOWN_LIST,'items'=>$model->getPrefixNameItems(),'options'=> [                'prompt' => '-คำนำหน้า-'            ]],            'prefixname_other' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'คำนำหน้าพิเศษ...']],            'firstname' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'ระบุ ชื่อจริง...']],            'lastname' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'ระบุ นามสกุล...']],            'age' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'ระบุ อายุ...']],           // 'birthday' => ['type' => Form::INPUT_WIDGET, 'widgetClass' => DateControl::classname(), 'options' => ['type' => DateControl::FORMAT_DATE]],            'birthday' => [                'type' => Form::INPUT_WIDGET,                'widgetClass' => \yii\widgets\MaskedInput::className(),                'options' => [                    'clientOptions' => [                        'alias' => ['99-99-9999']                    ]                ],            ],            'tel' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'ระบุ เบอร์โทร...']],            'mobile' => [                'type' => Form::INPUT_WIDGET,                'widgetClass' => \yii\widgets\MaskedInput::className(),                'options' => [                    'clientOptions' => [                        'alias' => ['9999999999']                    ]                ],            ],            'email' => ['type' => Form::INPUT_TEXT, 'options' => ['placeholder' => 'ระบุ Email...']],            'source' => [                'type' => Form::INPUT_DROPDOWN_LIST,                'items'=>$model->getSourceItems(),                'options'=> [                    'prompt' => '-แหล่งที่มา-'                ]            ],            'is_vip' => ['type' => Form::INPUT_CHECKBOX, 'options' => ['title' => 'เป็นลูกค้า VIP']],        ]    ]);    if($model->isNewRecord){        echo '<br>';        /**         * ที่อยุ่ที่สามาติดต่อได้         */        echo Html::tag('legend','<i class="fa fa-home"></i> ที่อยุ่ที่สามารถติดต่อได้');        echo  $this->render('address/_form-type-contact',[            'modelCustomer' => $model,            'form' => $form,            'modelAddress'=>$modelAddressContact,        ]);        echo '<br>';        /**         * ที่อยุ่ที่ทำงาน         */        echo Html::tag('legend','<i class="fa fa-home"></i> ที่อยุ่ที่ทำงาน');        echo  $this->render('address/_form-type-office',[            'modelCustomer' => $model,            'form' => $form,            'modelAddress'=>$modelAddressOffice,        ]);    }    echo Html::tag('p',        Html::submitButton($model->isNewRecord ? Yii::t('app', 'Create') : Yii::t('app', 'บันทึกข้อมูล'), ['class' => $model->isNewRecord ? 'btn btn-success' : 'btn btn-primary']),        ['align' => 'center']);    ActiveForm::end();    ?></div><hr><?php//แสดงปุ่มเพิ่มที่อยุู่ในหน้าแก้ไขif ( ! $model->isNewRecord) {    echo $this->render('address/index',[        'modelCustomer' => $model,        'dataProviderAddress'=>$dataProviderAddress    ]);    if ($model->addresses) {/*        echo \yii\grid\GridView::widget([            'dataProvider' => $dataProviderAddress,            'columns' => [                [                    'attribute' => 'type',                    'value' => function($model){                        if($model->type == \common\models\GeneralAddress::TYPE_CONTACT){                            return 'ที่อยุ่ที่สามารถติดต่อได้';                        }                        elseif ($model->type == \common\models\GeneralAddress::TYPE_OFFICE){                            return 'ที่อยู่ที่ทำงาน';                        }                    }                ],                'no',                'moo',                'amphur.name_th',                'province.name_th',                [                    'class' => 'yii\grid\ActionColumn',                    'template' => '{update} {view}',                    'buttons' => [                        'update' => function ($url, $model) {                            return Html::a('<span class="fa fa-edit"></span>',                                ['update-address', 'id' => $model->id], [                                    'title' => Yii::t('yii', 'Edit'),                                    'class' => 'modal-edit-address',                                    'data-header' => $model->typeName,                                ]);                        },                        'view' => function ($url, $model) {                            return Html::a('<span class="fa fa-search"></span>',                                ['view-address', 'id' => $model->id], [                                    'title' => Yii::t('yii', 'View'),                                    'class' => 'modal-view-address',                                    'data-header' => $model->typeName,                                ]);                        },                    ],                ],            ],        ]);*/    } else {        echo Html::tag('div', 'ยังไม่มีข้อมูลที่อยู่ใด ๆ ', ['class' => '', 'align' => 'center']);    }    Modal::begin([        'header' => '<h2></h2>',        'size' => 'modal-lg',        'id' => 'modal-customer'    ]);    Modal::end();}\backend\modules\crm\CustomerAsset::register($this);?>