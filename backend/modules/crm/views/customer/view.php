<?phpuse yii\helpers\Html;// use kartik\detail\DetailView;use yii\widgets\DetailView;use kartik\datecontrol\DateControl;use yii\bootstrap\Modal;use yii\widgets\Pjax;use kartik\editable\Editable;use \backend\modules\crm\CustomerAsset;CustomerAsset::register($this);/** * @var yii\web\View $this * @var backend\modules\crm\models\Customer $model */$this->title = $model->firstname . '  ' . $model->lastname;$this->params['breadcrumbs'][] = ['label' => 'Customers', 'url' => ['index']];$this->params['breadcrumbs'][] = $this->title;$ccustomerId = $model->id;?><div class="row">    <div class="col-xs-12 col-sm-6 col-md-5">        <p class="btn-group">            <?php  echo Html::a('<i class="fa fa-plus"></i> เพิ่มที่อยู่',                ['customer/add-address', 'customerId' => $model->id],                [                    'class' => 'btn btn-default btn-sm  modal-add-address',                    'title' => 'เพิ่มที่อยู่ใหม่',                    'data-header' => 'เพิ่ม: ที่อยู่ใหม่',                ]);            ?>            <?php  echo Html::a('<i class="fa fa-plus"></i> เพิ่มข้อมูลการติดต่อสื่อสารกับลูกค้า',                ['customer/add-communication', 'customerId' => $model->id],                [                    'class' => 'btn btn-default btn-sm  modal-add-communication',                    'title' => 'เพิ่มข้อมูลการติดต่อสื่อสารกับลูกค้า',                    'data-header' => 'เพิ่ม: ข้อมูลการติดต่อสื่อสารกับลูกค้า',                ]);            ?>        </p>        <?php        if($model->prefixname){            echo Html::tag('div', Html::activeLabel($model,'prefixname') . ': ' . Html::tag('span', $model->prefixname));        }        ?>        <?php        if($model->prefixname_other){            echo Html::tag('span', Html::activeLabel($model,'prefixname_other') . ': ' . Html::tag('span', $model->prefixname_other));        }        ?>        <?php        if($model->firstname){            echo Html::tag('div', Html::activeLabel($model,'firstname') . ': ' . Html::tag('span', $model->firstname.' '.$model->lastname));        }        ?>        <?php        if($model->gender){            echo Html::tag('div', Html::activeLabel($model,'gender') . ': ' . Html::tag('span', $model->genderName));        }        ?>        <?php        if($model->birthday){            echo Html::tag('div', Html::activeLabel($model,'birthday') . ': ' . Html::tag('span', $model->birthday));        }        ?>        <?php        if($model->mobile){            echo Html::tag('div', Html::activeLabel($model,'mobile') . ': ' . Html::tag('span', $model->mobile));        }        ?>        <?php        if($model->tel){            echo Html::tag('div', Html::activeLabel($model,'tel') . ': ' . Html::tag('span', $model->tel));        }        ?>        <?php        if($model->age){            echo Html::tag('div', Html::activeLabel($model,'age') . ': ' . Html::tag('span', $model->age));        }        ?>        <?php        if($model->email){            echo Html::tag('div', Html::activeLabel($model,'email') . ': ' . Html::tag('span', $model->email));        }        ?>        <?php        if($model->is_vip){            echo Html::tag('div', Html::activeLabel($model,'is_vip') . ': ' . Html::tag('span', $model->is_vip));        }        ?>        <?php        if($model->source){            echo Html::tag('div', Html::activeLabel($model,'source') . ': ' . Html::tag('span', $model->sourceName));        }        ?>        <?php        if($model->currentPersonInCharge){            echo Html::tag('div', Html::activeLabel($model,'source') . ': ' . Html::tag('span', $model->currentPersonInChargeFullname));        }        ?>        <?php        if($model->created_by){             $timeCreated =  \common\siricenter\thaiformatter\ThaiDate::widget([                'timestamp' => $model->created_at,                'showTime' => true,            ]);            echo html::tag('div', Html::activeLabel($model,'created_by') . ': ' . Html::tag('span', $model->createdName . " ({$timeCreated})"));        }        ?>        <?php        if($model->updated_by){            $timeUpdated = Html::tag('span', \common\siricenter\thaiformatter\ThaiDate::widget([                'timestamp' => $model->updated_at,                'showTime' => true,            ]));            echo Html::tag('div', Html::activeLabel($model,'updated_by') . ': ' .$model->updatedName. " ({$timeUpdated})");        }        ?>        <p>            <?php            echo Html::a('<i class="fa fa-edit"></i> Edit',['customer/update','id'=>$model->id],['class'=> 'btn btn-default btn-sm']);            ?>        </p>        <?php DetailView::widget([            'model' => $model,           // 'condensed' => false,           // 'hover' => true,            /*            'mode' => DetailView::MODE_VIEW,            'panel' => [                'heading' => '<i class="fa fa-user"></i> ' . $this->title,                'type' => DetailView::TYPE_DEFAULT,            ],            */            'attributes' => [                [                    'attribute' => 'prefixname',                   // 'type' => DetailView::INPUT_DROPDOWN_LIST,                    'items' => $model->prefixNameItems,                    'value' => $model->prefixName,                ],                'prefixname_other',                'firstname',                'lastname',                [                    'attribute' => 'gender',                   // 'type' => DetailView::INPUT_DROPDOWN_LIST,                    'items' => $model->genderItems,                    'value' => $model->genderName,                    'options' => [                        'prompt' => '-เพศ-',                    ]                ],                [                    'attribute' => 'birthday',                    // 'format' => ['date', (isset(Yii::$app->modules['datecontrol']['displaySettings']['date'])) ? Yii::$app->modules['datecontrol']['displaySettings']['date'] : 'd-m-Y'],                   // 'type' => DetailView::INPUT_WIDGET,                    'widgetOptions' => [                        'class' => \yii\widgets\MaskedInput::className(),                        'clientOptions' => [                            'alias' => ['99-99-9999']                        ],                        'options' => [                            'placeholder' => '31-12-2530',                        ]                    ],                ],                'mobile',                'age',                'email:email',                'tel',                [                    'attribute' => 'is_vip',                    // 'label'=>'Available?',                    'format' => 'raw',                    'value' => $model->is_vip ? '<span class="label label-success">Yes</span>' : '<span class="label label-default">No</span>',                   // 'type' => DetailView::INPUT_SWITCH,                    'widgetOptions' => [                        'pluginOptions' => [                            'onText' => 'Yes',                            'offText' => 'No',                        ]                    ],                    'valueColOptions' => ['style' => 'width:30%']                ],                [                    'attribute' => 'source',                  //  'type' => DetailView::INPUT_DROPDOWN_LIST,                    'items' => $model->sourceItems,                    'value' => $model->sourceName,                ],                [                    'attribute' => 'created_by',                    'value' => $model->orgPersonnel->fullnameTH,                ],                [                    'attribute' => 'created_at',                   // 'value' => Yii::$app->formatter->asDatetime($model->created_at, 'short'),                    'value' => \common\siricenter\thaiformatter\ThaiDate::widget([                        'timestamp' => $model->created_at,                        'type' => \common\siricenter\thaiformatter\ThaiDate::TYPE_SHORT,                        'showTime' => true,                    ]),                ],            ],        ]);        ?>        <div class="panel panel-default" id="section-address">            <div class="panel-heading"><h4 class="panel-title"><i class="fa fa-home"></i> ที่อยู่ลูกค้า</h4></div>            <div class="panel-body">                <div class="panel-content">                    <?php                    echo $this->render('address/index', ['modelCustomer' => $model,                        'dataProviderAddress' => $dataProviderAddress,]);                    ?>                </div>            </div>        </div>    </div>    <div class="col-xs-12 col-sm-6 col-md-7">        <?php Pjax::begin()?>        <div class="panel panel-default" id="section-q">            <div class="panel-heading"><h4 class="panel-title">                    <i class="fa fa-list"></i> Questionnaire Type -  ประเภทแบบสอบถาม                </h4></div>            <div class="panel-body">                <p>เลือกโครงการและแบบสอบถามที่ต้องการ</p>                <div class="panel-content">                    <?php                    echo $this->render('_survey', ['modelCustomer' => $model,                        'searchModelSurvey' => $searchModelSurvey,                        'dataProviderSurvey' => $dataProviderSurvey,                        'customerId' => $model->id,]);                    ?>                </div>            </div>        </div>        <?php Pjax::end()?>    </div></div><div class="row">    <div class="col-xs-12 col-sm12 col-md-12 col-lg-12">        <!-- start communication -->        <div class="panel panel-info" id="section-response">            <div class="panel-heading"><h4 class="panel-title"><i class="fa fa-book"></i> Questionnaire -  แบบสอบของถามลูกค้า</h4></div>            <div class="panel-body">                <div class="panel-content">                    <?php                    echo $this->render('_questionnaire', ['modelCustomer' => $model,                        'dataProviderAddress' => $dataProviderAddress,                        'dataProviderResponse' => $dataProviderResponse,                    ]);                    ?>                </div>            </div>        </div>        <!-- end communication-->    </div>    <div class="col-xs-12 col-sm12 col-md-12 col-lg-12">        <!-- start queationnaire of customer -->        <div class="panel panel-success" id="section-comm">            <div class="panel-heading"><h4 class="panel-title"><i class="fa fa-commenting"></i> Communication - การติดต่อสื่อสาร</h4>            </div>            <div class="panel-body">                <div class="panel-content">                    <?php                    echo $this->render('communication/index', ['modelCustomer' => $model,                        'dataProvider' => $dataProviderComm,                        'searchModel' => $searchComm,                        'dataProviderResponse' => $dataProviderResponse,                    ]);                    ?>                </div>            </div>        </div>        <!-- end queationnaire of customer -->    </div></div><?phpModal::begin([    'id' => 'modal-customer',    'size' => 'modal-lg',]);Modal::end();$this->registerJs("");?>