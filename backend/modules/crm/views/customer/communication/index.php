<?phpuse yii\helpers\Html;use yii\grid\GridView;use yii\widgets\ListView;?>    <style>        [contenteditable=true]:empty:before {            content: attr(placeholder);            display: block; /* For Firefox */        }        /* */        div[contenteditable=true] {            border: 1px dashed #AAA;            width: 99%;            padding: 5px;        }        .btn-edit-comment {            cursor: pointer;        }        .comment-nav {            padding: 3px;        }    </style>    <p>        <?php echo Html::a('<i class="fa fa-plus"></i>',            ['customer/add-communication', 'customerId' => $modelCustomer->id],            [                'class' => 'btn btn-success btn-sm  modal-add-communication',                'title' => 'เพิ่มข้อมูลการติดต่อสื่อสารกับลูกค้า',                'data-header' => 'เพิ่ม: ข้อมูลการติดต่อสื่อสารกับลูกค้า',            ]);        ?>    </p><?php$this->render('_form', [    'model' => new \backend\modules\crm\models\Communication(),    'customer' => $modelCustomer,]);?>    <div class="table-responsive">        <?php        \yii\widgets\Pjax::begin();        echo ListView::widget([            'dataProvider' => $dataProvider,            'id' => 'grid-communication',            'itemView' => '_list',            'itemOptions' => ['class' => 'col-xs-12 col-sm-12'],            'layout' => "{items}\n{pager}",        ]);        GridView::widget([            'dataProvider' => $dataProvider,            'filterModel' => $searchModel,            'id' => 'grid-communication',            'columns' => [                /*[                    'header' => 'วันที่',                    'attribute' => 'datetime',                    'class' => \kartik\grid\EditableColumn::className(),                    'editableOptions' => [                        'formOptions' => [                            'action' => \yii\helpers\Url::to(['communication/editcommunication'])                        ],                        'inputType' => \kartik\editable\Editable::INPUT_WIDGET,                        'widgetClass' => \kartik\datecontrol\DateControl::className()                    ],                    'format' => 'raw'                ],*/                [                    'attribute' => 'datetime',                    'format' => 'raw',                    'value' => function ($model) {                        return \common\siricenter\thaiformatter\ThaiDate::widget([                            'timestamp' => $model->datetime,                            'type' => \common\siricenter\thaiformatter\ThaiDate::TYPE_SHORT,                            'showTime' => true,                        ]);                    }                ],                'detail:ntext',                'createdName',                /*            [                                'class' => \kartik\grid\EditableColumn::className(),                                'attribute' => 'detail',                                'editableOptions' => [                                    'submitOnEnter' => false,                                    'inputType' => \kartik\editable\Editable::INPUT_TEXTAREA,                                     'asPopover' => false,                                    'formOptions' => [                                        'action' => \yii\helpers\Url::to(['communication/editcommunication'])                                    ],                                    'options' => [                                        'class'=>'form-control',                                        'rows'=>5,                                        'style'=>'width:400px',                                        'placeholder'=>'พิ่มพ์ข้อความ...',                                    ],                                ],                                'hAlign' => GridView::ALIGN_LEFT,                            ],*/                [                    'class' => '\yii\grid\ActionColumn',                    'template' => '{update-communication} {view-communication} {delete-communication}',                    'options' => [                        'style' => 'width:60px',                    ],                    'buttons' => [                        'update-communication' => function ($url, $model) {                            return Html::a('<i class="fa fa-edit"></i>',                                ['update-communication', 'id' => $model->id], [                                    'title' => Yii::t('yii', 'Edit'),                                    'class' => 'modal-edit-communication',                                    'data-header' => 'แก้ไข: ' . $model->title,                                ]);                        },                        'view-communication' => function ($url, $model) {                            return Html::a('<i class="fa fa-search"></i>', ['view-communication', 'id' => $model->id], [                                'class' => 'modal-view-communication',                                'data-header' => Yii::$app->formatter->asDatetime($model->datetime),                            ]);                        },                        'delete-communication' => function ($url, $model) {                            return Html::a('<i class="fa fa-trash"></i>', ['delete-communication', 'id' => $model->id], [                                'data-confirm' => 'ต้องการลบที่อยุ่ที่อยุ่ใช่หรือไม่ ?',                                'data-method' => 'POST'                            ]);                        }                    ]                ],            ],        ]);        \yii\widgets\Pjax::end();        ?>    </div><?php$js = <<<JS$('.btn-edit-comment').on('click', function() { console.log('edit')    var id = $(this).data('id')  var target = $('#comment-detail' + id)    var navbar = $("#comment-nav-" + id)    var textbox = $("#comment-textbox-" + id);    target.attr('contenteditable', true)    navbar.show()    $(this).fadeOut()})$('.btn-update-comment').on('click', function() {     var id = $(this).data('id')    var target = $('#comment-detail' + id)    var btnEdit = $('.comment-btn-edit' + id)     var textbox = $("#comment-textbox" + id)        var title = $('#comment-title' +id)    var updated_at  = $('#comment-updatedat'+id)   $.ajax({       url:'update-communication-ajax?id=' + id,       method:'post',       data:{detail:target.text()},       dataType:'json',       success:function(rs) {         if(rs.success===1) {             target.prop('contenteditable', false)             btnEdit.show()                 target.html(rs.row.detail)              title.html(88888888888888);              updated_at.html(rs.row.updated_at)            textbox.remove();         }       }    })      $(this).parent().hide()})$('.btn-cancel-comment').on('click', function() {    var id = $(this).data('id')    var target = $('#comment-detail' + id)    var navbar = $("#comment-nav" + id)    var btnEdit = $('.comment-btn-edit' + id)    var textbox = $("#comment-textbox" + id);    target.prop('contenteditable', false)    $(this).parent().hide()    btnEdit.show()    textbox.remove()    target.show()     console.log('cancel' + id)})JS;$this->registerJs($js);?>