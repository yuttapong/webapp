<?phpuse yii\helpers\Html;use yii\widgets\DetailView;use kartik\tabs\TabsX;use kartik\form\ActiveForm;use yii\bootstrap\Modal;use backend\modules\crm\SurveyAsset;use kartik\editable\Editable;SurveyAsset::register($this);/* @var $this yii\web\View *//* @var $model backend\modules\crm\models\Response */$this->title = ($modelResponse) ? $modelResponse->customer->fullname : $model->name;$this->params['breadcrumbs'][] = ['label' => 'Responses', 'url' => ['index']];$this->params['breadcrumbs'][] = $this->title;?>    <div align="center">        <h2><?= $modelResponse->survey->name ?></h2>        <hr>        <?php        $datetime = \common\siricenter\thaiformatter\ThaiDate::widget([            'timestamp' => $modelResponse->datetime,            'type' => \common\siricenter\thaiformatter\ThaiDate::TYPE_LONG,            'showTime' => false,        ]);        echo Html::tag('h4', 'วันที่ลูกค้ามาเยี่ยมชมโครงการ <span class="badge" style="font-size:16px">' . ($datetime) . '</span>');        ?>    </div>    <div class="row">        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.prefixname') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->prefixName ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.prefixname_other') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->prefixname_other ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.fullname') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->fullname ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.gender') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->genderName ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.mobile') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->mobile ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.tel') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->tel ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.email') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->email ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.source') ?></div>                <div class="col-xs-6"><?= $modelResponse->customer->sourceName ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'created_by') ?></div>                <div class="col-xs-6"><?= $modelResponse->created->fullnameTH ?>                    <br>                    <?php                    echo \common\siricenter\thaiformatter\ThaiDate::widget([                        'timestamp' => $modelResponse->created_at,                        'type' => \common\siricenter\thaiformatter\ThaiDate::TYPE_SHORT,                        'showTime' => true,                    ])                    ?></div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'updated_by') ?></div>                <div class="col-xs-6"><?= $modelResponse->updated->fullnameTH ?>                    <br>                    <?php                    echo \common\siricenter\thaiformatter\ThaiDate::widget([                        'timestamp' => $modelResponse->updated_at,                        'type' => \common\siricenter\thaiformatter\ThaiDate::TYPE_SHORT,                        'showTime' => true,                    ])                    ?>                </div>            </div>        </div>        <div class="col-xs-12 col-sm-6 col-md-4">            <div class="row">                <div class="col-xs-6" align="right"> <?= Html::activeLabel($modelResponse, 'customer.is_vip') ?></div>                <div                    class="col-xs-6"><?= $modelResponse->customer->is_vip ? '<span  class="label label-success">ใช่</span>' : '<span class="label label-default">ไม่</span>'; ?></div>            </div>        </div>    </div><?phpHtml::a('<i class="fa fa-edit"></i> แก้ไขโปรไฟล์',    ['customer/view', 'id' => $modelResponse->table_key],    [        'class' => 'btn btn-default btn-xs'    ]);?>    <hr><?phpforeach ($modelResponse->customer->addresses as $address) {    echo '<p>';    echo '<span class="badge" style="min-width:100px;">' . $address->typeName . '</span>';    if ($address->company) {        echo '&nbsp;&nbsp;<strong>บริษัท</strong> ' . $address->company;    }    if ($address->no) {        echo '&nbsp;&nbsp;<strong>เลขที่</strong>  ' . $address->no;    }    if ($address->soi) {        echo '&nbsp;&nbsp;<strong>ซอย</strong> ' . $address->soi;    }    if($address->moo) {        echo '&nbsp;&nbsp;<strong>หมู่</strong>  ' . $address->moo;    }    if($address->village) {        echo '&nbsp;&nbsp;<strong>หมู่บ้าน</strong> ' . $address->village;    }   if($address->road) {       echo '&nbsp;&nbsp;<strong>ถนน</strong> ' . $address->road;   }   if($address->tambon) {       echo '&nbsp;&nbsp;<strong>แขวง/ตำบล</strong> ' . @$address->tambon->name_th;   }    if($address->amphur) {        echo '&nbsp;&nbsp;<strong>เขต/อำเภอ</strong> ' . @$address->amphur->name_th;    }    if($address->province) {        echo '&nbsp;&nbsp;<strong>จังหวัด</strong> ' . @$address->province->name_th;    }    if($address->zipcode) {        echo '&nbsp;&nbsp;<strong>รหัสไปรษณีย์</strong> ' . $address->zipcode;    }    echo '</p>';}Html::a('<i class="fa fa-edit"></i> แก้ไขที่อยู่',    ['customer/view', 'id' => $modelResponse->table_key],    [        'class' => 'btn btn-default btn-xs'    ]);?>    <hr><?php$items_d = [];$items_x = [];$question_c = $models;if (count($question_c) > 0) {    foreach ($question_c as $k_tab => $v_tab) {        $items_d['label'] = $v_tab['tab_name'];        $text = '';        foreach ($v_tab['item'] as $k_title => $v_title) {            if ($v_title['title_hide'] == 0) {                $text .= '<div class="row"><h4> ' . $v_title['title_name'] . '</h4></div>';            }            if (!empty($v_title['item'])) {                $questionSeq = 1;                foreach ($v_title['item'] as $k_type => $v_type) {                    $text .= $this->render('choice/type_table_multi', [                        'survey_id' => $survey_id,                        'questionSeq' => $questionSeq,                        'tab_id' => $k_tab,                        'tite_id' => $k_title,                        'item' => $v_type['question'],                    ]);                    $questionSeq++;                }            }            if (!empty($v_title['items'])) {                $questionSeq = 1;                foreach ($v_title['items'] as $k_question => $v_question) {                    if ($v_question['type_id'] == '4' || $v_question['type_id'] == '5') {                        $text .= $this->render('/survey/choice/type_choice', [                            'questionSeq' => $questionSeq,                            'survey_id' => $survey_id,                            'tab_id' => $k_tab,                            'tite_id' => $k_title,                            'modelResponse' => $modelResponse,                            'modelQuestion' => $v_question['modelQuestion'],                            'answerSingle' => $answerSingle,                            'answerMultiple' => $answerMultiple,                            'answerText' => $answerText,                            'responseId' => $modelResponse->id,                        ]);                    } else {                        $text .= $this->render('/survey/choice/type_choice_single', [                            'survey_id' => $survey_id,                            'tab_id' => $k_tab,                            'tite_id' => $k_title,                            'questionSeq' => $questionSeq,                            'modelResponse' => $modelResponse,                            'modelQuestion' => $v_question['modelQuestion'],                            'answerSingle' => $answerSingle,                            'answerMultiple' => $answerMultiple,                            'answerText' => $answerText,                            'responseId' => $modelResponse->id,                        ]);                    }                    $questionSeq++;                }            }        }        $items_d['content'] = $text;        $items_x[] = $items_d;    }}$form = ActiveForm::begin([    'type' => ActiveForm::TYPE_HORIZONTAL,    'id' => 'form-survey',]);echo TabsX::widget([    'items' => $items_x,    'position' => TabsX::POS_ABOVE,    'encodeLabels' => false]);echo Html::hiddenInput('survey_id', $survey_id);echo Html::hiddenInput('customer_id', $customer_id);Html::submitButton("บันทึก", ['id' => 'btn-save-survey', 'class' => 'btn btn-primary']);ActiveForm::end();?><?phpModal::begin([    'header' => '<h2></h2>',    'id' => 'modall-view',    // 'toggleButton' => ['label' => 'click me'],]);echo 'Say hello...';Modal::end();$this->registerCss('input[type=radio] { width: 1.5em; height: 1.5em; }input[type=checkbox] { width: 1.5em; height: 1.5em; }');