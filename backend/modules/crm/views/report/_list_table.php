<?phpuse backend\modules\crm\models\Question;?><div class="table-responsive">    <table border="1" class="table table-bordered table-striped">        <tr>            <?php            //echo '<th nowrap>#</th>';            echo '<th nowrap>ID</th>';            echo '<th nowrap>วันที่</th>';            echo '<td nowrap>CE</td>';            echo '<td nowrap>รหัสลูกค้า</td>';            echo '<th nowrap>ชื่อ-สกุล (ลูกค้า)</th>';            echo '<td nowrap>มือถือ</td>';            echo '<td nowrap>โทรศัพท์</td>';            echo '<td nowrap>E-mail</td>';            $loopRes = 1;            foreach ($arr_survey as $key => $vals) {                if ($vals['type_id'] == Question::TYPE_RADIO) {                    echo '<th nowrap>' . $loopRes . ') ' . $vals['question'] . '</th>';                    if (isset($vals['other'])) {                        echo '<th nowrap>' . $loopRes . '.1) อื่น ๆ '. '</th>';                    }                }                else if ($vals['type_id'] == Question::TYPE_CHECKBOX) {                    echo '<th nowrap><span class="text-danger">' . $loopRes . ') ' . $vals['question'] . '</span></th>';                    $j = 1;                    foreach ($vals['choices'] as $choiceId => $choiceTitle) {                        echo '<th nowrap>' . $loopRes . '.' . $j . '  ' . $choiceTitle . '</th>';                       if($vals['type'][$choiceId] =='another') {                           echo "<th nowrap>{$loopRes}.{$j}.1) {$choiceTitle} อื่น ๆ</th>";                       }                        $j++;                    }                }else{                    echo '<th nowrap>' . $loopRes . ') ' . $vals['question'] . '</th>';                    if (isset($vals['other'])) {                        echo '<th nowrap>อื่นๆ</th>';                    }                }                $loopRes++;            }            ?>        </tr>        <?php        /************************************         * วนแสดงคำตอบ         */        foreach ($modelResponse as $response) {            echo ' <tr>';            echo '<td>' . $response->id . '</td>';            echo '<td nowrap>' . Yii::$app->formatter->asDate($response->datetime, 'medium') . '</td>';            echo '<td nowrap>' . $response->created->firstname_th. '</td>';            echo '<td nowrap>' . $response->customer->id. '</td>';            echo '<td nowrap>' . $response->customer->fullname. '</td>';            echo '<td nowrap>' . $response->customer->mobile. '</td>';            echo '<td nowrap>' . $response->customer->tel. '</td>';            echo '<td nowrap>' . $response->customer->email. '</td>';            //ประเภทคำถาม            $loopResAnswer = 1;            foreach ($arr_survey as $key => $vals) {                if ($vals['type_id'] == Question::TYPE_RADIO) {                    echo '<td nowrap>';                    echo (isset($arr_response[$response->id]['question'][$key])) ?  $arr_response[$response->id]['question'][$key] : '';                    echo '</td>';                    if (isset($vals['other'])) {                        echo '<td nowrap>';                        echo (isset($arr_response[$response->id]['other'][$key][$vals['other']])) ? implode(",", $arr_response[$response->id]['other'][$key][$vals['other']]) : '';#mplode(",",$v_res['other'][$key][$vals['other']])                        echo '</td>';                    }                }                else if ($vals['type_id'] == Question::TYPE_CHECKBOX) {                    echo '<td nowrap><span class=" text-danger">' . $loopResAnswer . ') ' . $vals['question'] . '</span></td>';                    foreach ($vals['choices'] as $k_choi => $v_choi) {                        echo '<td nowrap>';//$response->id.' '.$key.' '.$k_choi;                        echo (isset($arr_response[$response->id]['question'][$key][$k_choi])) ? $arr_response[$response->id]['question'][$key][$k_choi] : '';                        echo '</td>';                        if($vals['type'][$k_choi] =='another') {                        echo '<td nowrap>';                        echo(isset($arr_response[$response->id]['other'][$key][$k_choi]) ? implode('<br>', $arr_response[$response->id]['other'][$key][$k_choi]) : '');                        echo '</td>';                    }                    }                }else{                    echo '<td nowrap>';                    echo (isset($arr_response[$response->id]['question'][$key])) ?  $arr_response[$response->id]['question'][$key] : '';                    echo '</td>';                }                $loopResAnswer++;            }            echo ' </tr>';        }        ?>    </table></div><?php//echo '<pre>';//print_r($arr_survey);//print_r($arr_response);//echo '</pre>';?>